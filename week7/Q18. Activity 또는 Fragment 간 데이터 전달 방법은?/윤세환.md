### Activity간 데이터 전달

- 데이터를 전송하는 쪽에서는 Activity를 실행할 때 intent의 putExtra 메서드를 통해 데이터를 intent에 추가
- 데이터를 수신하는 쪽에서는 onCreate 내에서 getIntent를 통해 intent에 접근한 후 해당 intent에 들어있는 데이터를 가져온다.

### Fragment간 데이터 전달 - setArguments

- 데이터를 전송하는 쪽에서 먼저 bundle 형식의 데이터를 생성한 다음, 데이터를 수신할 Fragment를 생성한 후 해당 Fragment의 setArguments 메서드를 호출하여 bundle를 전달
- 데이터를 수신하는 쪽에서는 onCreateView에서 arguments에 접근하여 데이터를 가져온다.

```kotlin
class DataReceiveFragment: Fragment() {
	companion object {
		private const val USER_NAME = "user_name"
		
		fun newInstance(userName: String) : DtaReceiveFragment {
			val fragment = DataReceiveFragment()
			val args = Bundle()
			args.putString(USER_NAME, userName)
			fragment.arguments = args
			return fragment
		}
	}
	
	override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
		super.onViewCreated(view, savedInstanceState)
		
		val userId = arguments?.getString(USER_NAME)
	}
}
```

```kotlin
class DataSendFragment: Fragment() {
	fun callDataReceiveFragment() {	
		val dataReceiveFragment = DataReceiveFragment.newInstance("YSH")
		parentFragmentManager
			.beginTransaction
			.replace(R.id.fragment_container, dataReceiveFragment)
			.commit()
	}
}
```

### Fragment간 데이터 전달 - Jetpack Navigation

- Jetpack navigation에서 제공하는 Safe Args 플러그인을 사용하면 대상 간 타입-세이프 네비게이션과 인수 전달을 가능하게 하는 direction 및 argument 클래스가 컴파일 타임에 자동적으로 생성
- 사용 방법
    1. 네비게이션 그래프에서 인수 정의
        
        ```xml
        <fragment
        	android:id="@+id/secondFragment"
        	android:name="com.example.SecondFragment">
        	<argument
        		android:name="username"
        		app:argType="string" />
        </fragment>
        ```
        
    2. 데이터 전송 Fragment에서 Safe Args 플러그인을 통해 자동 생성된 메서드를 사용하여 데이터 전송
        
        ```kotlin
        val action = FirstFragmentDirections
        	.actionFirstFragmentToSecondFragment(username = "YSH") // 자동 생성
        findNavController().navigate(action)
        ```
        
    3. 데이터를 수신하는 Fragment에서 데이터 수신
        
        ```kotlin
        val username = arguments?.let {
        	SecondFragmentArgs.fromBundle(it).username
        }
        ```
        

### Fragment간 데이터 공유 - Shared ViewModel

- jetpack내 `androidx.fragment:fragment-ktx` 패키지에 제공되는 activityViewModels 메서드를 사용하여 동일 Activity에 존재하는 Fragment간 데이터를 공유하는 방식

```kotlin
class Test1Fragment: Fragment() {
	private val sharedViewModel: SharedViewModel by activityViewModels()
}

class Test2Fragment: Fragment() {
	private val sharedViewModel: SharedViewModel by activityViewModels()
}
```

### Q. 동일한 Activity 내에서 Fragment간 데이터를 주고받을 때 어떤 방법이 효과적인지 설명해주시고, ViewModel을 활용한다면 Bundle이나 직접적인 Fragment 트랜잭션을 사용하는 것과 비교했을 때 어떤 이점이 있나요?

- Fragment간 데이터를 주고 받는데 있어서 아래 조건에 맞춰 사용하는 것이 효과적이라고 생각
    - 데이터를 주고받는 케이스가 드물고, 주고받는 데이터 형식이 매우 단순한 경우에는 고전적인 setArguments 방식
    - 데이터를 주고받는 케이스가 많으며, 주고받는 데이터 형식이 매우 다양한 경우에는 Jetpack navigation에서 제공하는 Safe Args 방식
    - Fragment 전환이 회원가입 단계처럼 특정 과정을 거쳐가는 방식, 즉 하나의 큰 기능을 공유해야 하는 상황이거나 특정 데이터를 실시간으로 공유해야 하는 상황이라면 SharedViewModel 방식
- SharedViewModel을 사용한다면 다른 방식과는 달리 각 Fragment간 독립성을 유지할 수 있으며, 실시간으로 데이터를 공유하므로 동일한 데이터를 공유해야 하는 Fragment라면 데이터 동기화에 대한 별도의 로직을 작성할 필요가 없다.
하지만 SharedViewModel을 사용할 경우 해당 SharedViewModel를 사용하는 Fragment의 모든 UI로직 및 UseCase 호출부가 하나의 SharedViewModel에 몰릴 수 있어 주의가 필요하다고 생각